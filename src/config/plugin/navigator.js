// Phaser Navigator plugin for KaiOS
var root,factory;root=window,factory=function(){return function(t){var e={};function a(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:0,exports:{}};return t[o].call(r.exports,r,r.exports,a),r.l=1,r.exports}return a.m=t,a.c=e,a.d=function(t,e,o){a.o(t,e)||Object.defineProperty(t,e,{enumerable:1,get:o})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:1})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:1,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(o,r,function(e){return t[e]}.bind(null,r));return o},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="plugin/",a(a.s=0)}([function(t,e,a){a(1),Phaser.Plugin.Navigator=function(t,e){Phaser.Plugin.call(this,t,e)},Phaser.Plugin.Navigator.prototype=Object.create(Phaser.Plugin.prototype),Phaser.Plugin.Navigator.prototype.constructor=Phaser.Plugin.SamplePlugin,Phaser.Plugin.Navigator.prototype.stack=[],Phaser.Plugin.Navigator.prototype.init=function(){game.softkey=game.plugins.add(Phaser.Plugin.Softkey)},Phaser.Plugin.Navigator.prototype.register=function(t){this.stack.push(Object.assign({},game.softkey.getLastConfig())),this.group=game.softkey.config({style:t.style,label:t.label}),game.softkey.listener(t.action)},Phaser.Plugin.Navigator.prototype.setLastConfig=function(){var t=this.stack.pop();this.group=game.softkey.config({style:t.style,label:t.label}),game.softkey.listener(t.action)},Phaser.Plugin.Navigator.prototype.stackPopAll=function(){this.stack=[]},Phaser.Plugin.Navigator.prototype.destroy=function(){this.group.kill()}},function(t,e){function a(t,e,a){this.fixLenght=Math.floor(e*t.text.length/t.width)-2,this.newText=t.text.substr(0,this.fixLenght)+"...",t.text=this.newText,1===a&&(t.x=game.camera.x+10+t.width/2),3===a&&(t.x=game.camera.x+(game.camera.width-10)-t.width/2)}Phaser.Plugin.Softkey=function(t,e){Phaser.Plugin.call(this,t,e)},Phaser.Plugin.Softkey.prototype=Object.create(Phaser.Plugin.prototype),Phaser.Plugin.Softkey.prototype.constructor=Phaser.Plugin.SamplePlugin,Phaser.Plugin.Softkey.prototype.skGroup=null,Phaser.Plugin.Softkey.prototype.lastConfig={},Phaser.Plugin.Softkey.prototype.defaultHandler={},Phaser.Plugin.Softkey.prototype.listener=function(t){self=this,this.lastConfig.action=t,window.onkeydown=function(e){self._keyPress(e,t)}},Phaser.Plugin.Softkey.prototype.config=function(t){if(t.label)return t.style||(t.style={font:"16px Open Sans",fill:"#ffffff"}),this.skGroup&&this.skGroup.removeAll(),this.skGroup=game.add.group(),this.skGroup.fixedToCamera=1,this.skGroup.cameraOffset.setTo(-game.camera.x,-game.camera.y),this.lastConfig.label=t.label,this.lastConfig.style=t.style,this.centerX=game.camera.x+game.camera.width/2,this.portionLenght=Math.round(.9*game.camera.width/3),void 0!==t.label.lsk&&(this.lsk=game.add.text(game.camera.x+10,game.camera.y+(game.camera.height-9),t.label.lsk.text,t.label.lsk.style?t.label.lsk.style:t.style),this.lsk.x=game.camera.x+10+this.lsk.width/2,this.lsk.anchor.setTo(.5),this.skGroup.add(this.lsk),this.lsk.width>this.portionLenght&&a(this.lsk,this.portionLenght,1)),void 0!==t.label.csk&&(this.csk=game.add.text(this.centerX,game.camera.y+(game.camera.height-9),t.label.csk.text,t.label.csk.style?t.label.csk.style:t.style),this.csk.anchor.setTo(.5),this.skGroup.add(this.csk),this.csk.width>this.portionLenght&&a(this.csk,this.portionLenght)),void 0!==t.label.rsk&&(this.rsk=game.add.text(190,game.camera.y+(game.camera.height-9),t.label.rsk.text,t.label.rsk.style?t.label.rsk.style:t.style),this.rsk.x=game.camera.x+(game.camera.width-10)-this.rsk.width/2,this.rsk.anchor.setTo(.5),this.skGroup.add(this.rsk),this.rsk.width>this.portionLenght&&a(this.rsk,this.portionLenght,3)),this.skGroup},Phaser.Plugin.Softkey.prototype.getLastConfig=function(){return this.lastConfig},Phaser.Plugin.Softkey.prototype._keyPress=function(t,e){var a=null,o=this._debug(t);switch(o){case"SoftLeft":e.softLeft&&(a=e.softLeft,t.preventDefault());break;case"Enter":e.enter&&(a=e.enter,t.preventDefault());break;case"MicrophoneToggle":t.preventDefault();break;case"SoftRight":e.softRight&&(a=e.softRight,t.preventDefault());break;case"Backspace":e.backspace&&(a=function(){t.preventDefault(),t.stopImmediatePropagation(),e.backspace()});break;case"EndCall":e.endCall&&(a=function(){t.preventDefault(),t.stopImmediatePropagation(),e.endCall()});break;default:e[o]&&(a=e[o])}a||(a=this.defaultHandler[o]),a&&a()},Phaser.Plugin.Softkey.prototype._debug=function(t){if(game.custom&&game.custom.debug&&(console.warn("[Phaser.Plugin.Softkey] in debug mode!",t.key),t.shiftKey))switch(t.key){case"ArrowLeft":return"SoftLeft";case"ArrowRight":return"SoftRight"}return t.key}}])},"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports?exports["phaser-navigator"]=factory():root["phaser-navigator"]=factory();